* Assets Under Management (AUM) : How much money is being managed by the fund
* 3 types of funds:
	1. ETF: Exchange Trade Funds: (4 letter symbols)
		* Buy/Sell like stocks
		* Baskets of stocks
		* Transparent
		* High liquidity
		* Fund Manager compensation: -- manner in which they are paid, incentives them to trade or act in certain ways -- based on how much the value of that fund increases
			* According to Expense Ratio (which is some percentage of the AUM) 
			* Usually pretty low (0.01% - 1.00%)
	2. Mutual Funds: (5 letter symbols)
		* Buy/Sell at end of day
		* Quarterly disclosure
			* less transparent
		* Fund Manager compensation: -- manner in which they are paid, incentives them to trade or act in certain ways -- based on how much the value of that fund increases
			* According to Expense Ratio
			* Somewhat higher than ETF's -- (0.5% - 3.00%)
			* These managers use more discretion and supposedly "skill" and so require larger compensation
	3. Hedge Funds: (not symbolized) -- typically have up to only 100 investors
		* Buy/Sell by agreement
		* No disclosure
			* Not transparent
		* Fund Manager compensation: -- manner in which they are paid, incentives them to trade or act in certain ways -- based on how much the value of that fund increases
			* According to "Two and Twenty" (2% AUM + 20% profits) -- "Two" is based on the hedge fund and when they choose to take snap shots of accounting -- usually a blend between some snap 
			shot and the profit return

	ex. Incentives: How are they compensated?
		* Two and Twenty
			* 15% return this year
			* $100,000,000 -> 15% -> $115,000,000

			* "Two" == $100,000,000 * 0.02 = $2,000,000
			* "Twenty" == $15,000,000 * 0.02 = $3,000,000 
				
	ex. Incentives: Which motivates...	Expense ratio		Two and Twenty
			* AUM accumulation		*			*	-- if strictly driven by expense ratio, you will be spending most energy towards accumulating AUM for a higher return
			* Profits						* 	-- only hedge fund managers make a percent of a return(profit) ETFs and Mutual Fund managers only receive expense ratio
			* Risk Taking						*	-- ETFs and MFs managers receive no reward for risk taking; HFs rewarded for risks (profits), & no punishment
											for risks because they still receive the "Two"

* Large Cap = capitalization: i.e., how much is the company worth according to number shares that are outstanding * price of the stock (what 1 share is selling at)
	* outstanding shares: refers to a company's stock currently held by all its shareholders, including share blocks held by institutional investors and restricted shares owned by the company's officers 
	and insiders

* How funds attract investors for hedge funds:
	* who?
		* individuals:
			* a single person (wealthy) who wants to invest in fund 
			* because a HF typically has only up to 100 investors, they want each of those investment/investor to be fairly large
		* institutions:
			* large retirement funds, university foundations -- very often non-profit institutions that have a very large sum of money that they need to keep somewhere and want to see an accrual 
			in value
		* funds of funds:
			* group together the funds of many individuals or institutions 
			* Manager decides which hedge funds to invest in 

	* why they might invest in your fund?
		* track record:
			* fund has a great track record = good evidence for continual success
			* many investors want to see a good track record for at least 5 years before they'll invest in a particular fund
		* simulation + story:
			* backtest/simulate your strategy
			* simulation must be backed by a very compelling story describing that strategy; i.e., must have a reason for why this method works and it needs to make sense
		* good portfolio fit:
			* how your strategy fits within their portfolio
			* ex., if your strategy is for large cap S&P500 stocks and they already have that covered, they probably wont consider you
			however, if you are looking at small cap growth stocks and they don't yet have that part of their portfolio filled, they'll give you more consideration


* Hedge Fund goals and metrics: when an investor is considering a particular hedge fund, they want to know what are the goals of the hedge funds, and the results of certain metrics
	* Goals:
		* Beat a benchmark (funds):
			* ex. you have a strategy that looks at the stocks in the SP500(SPY: 500 stocks), you are wise at seleting certain SP500 stocks and want to beat the SP500 index as a benchmark
			(the overall SP500 index has good and bad stocks) so if you picked the "good" ones you should beat the SP500 index 
			* Important component: 
				* many benchmarks (like the stock market as a whole) go down, it is of course natural that a portfolio consisting of stocks from that index might go down as well
					* so even though the index and the fund go down, you can outperform the index by going down less and still meet performance goals if index goes down more
		* Absolute return (funds):
			* Goal: provide positive return no matter what
			* usually long/short:
				* they make positive bets in stocks they think are going to go up and negative bets in stocks they think are going to go down 
			* objective: to make slow, gradual positive return no matter what
			* often times, these types of funds don't make the same percentage gains as the beat a benchmark funds, but they have very low drawdowns (i.e., when the market takes a big hit
			 they often don't)
	* Metrics: How to measure how well a fund is meeting its goals
		* cumulative return
			* a measure of aggregate amount an investment has gained or lost over given time -- (val[-1] / val[0]) - 1
			* if fund made 20% over a year, cumulative return is 0.2
		* volatility: Standard deviation of daily returns
			* how rapidly and aggressively the portfolio goes up and down in value -- (daily_ret.std())
		* risk/reward: Sharpe ratio
			* risk adjusted reward -- reward = average daily return - risk free rate ; risk = measure of standard deviation of daily returns
			* multiply by sqrt of k (constant representing frequency of sampling: 252 = daily, 12 = monthly, 1 = yearly)


* What is an order?
	* Components: the info that must go into a well formed order
		* buy/sell:
			* looking to buy or sell shares of stock  
		* symbol:
			* identifier for the stock or perhaps the ETF, that you want to buy or  sell
		* # shares
			* stocks and ETFs are sold in units of shares not by amount of money
		* limit or market:
			* market: you are willing to accept a good price but essentially whatever price the market is currently bearing
			* limit: you don't want to do any worse than a certain price -- must specify limit
		* price:
			* if limit order: must specify what the corresponding limit is (price)
			* if market order: you are not able to specify that price because with market order you are taking whatever price comes back
		* ex:
			* BUY, IBM, 100, LIMIT, 99.95 -- buy 100 shares of IBM at no more than $99.95 a share
			* SELL, GOOG, 150, MARKET
	* The Order Book:
		* each exchange keeps an order book for every stock that they buy or sell 
		* ex: 
			* first order of day -- used as basis to start building their order book 
				* BUY, IBM, 100, LIMIT, 99.95 -- buy 100 shares of IBM at no more than $99.95 a share
					* BID 99.95 100 -- someone bid 99.95 for a 100 shares of stock -- this is public knowledge (bidder id is NOT public, but is known to exchange) 
						* 100 gets larger depending on how many following orders come in
							* so far nothing has been bought or sold because we don't yet have anyone willing to sell 
			* first sell order of day
				* SELL, IBM, 1000, LIMIT, 100 -- but there is nobody yet willing to buy at $100 therefore exchange adds this order to its order book 
					* ASK 100.00 100
			* order book has grown over course of the day...
				* BID/ASK		PRICE			SIZE
				* ASK			100.10			100
				* ASK 			100.05			500
				* ASK			100.00			1000
				* BID			99.95			100
				* BID			99.90			50		
				* BID			99.85			50
			* a market order comes in...
				* BUY, IBM, 100, MARKET
					* here's what happens...
						* exchange looks at its order book, sees that there are shares for sale
							* exchange has to give client LOWEST PRICE (100.00)
			* order book has been updated after market order...
				* BID/ASK		PRICE			SIZE
				* ASK			100.10			100
				* ASK 			100.05			500
			-->	* ASK			100.00			900
				* BID			99.95			100
				* BID			99.90			50		
				* BID			99.85			50
			* The remaining stock price will probably go DOWN -- due to amount of stock for sale vs stock bids (i.e., more selling pressure)
				* if a market order to sell 500 shares came in, the price would immediately go down
				* if a market order to buy 500 shares came in, the price would remain the same

			* limit order comes in...
				* BUY, IBM, 100, LIMIT, 100.02
			* order book has been updated after market order...
				* BID/ASK		PRICE			SIZE
				* ASK			100.10			100
				* ASK 			100.05			500
			-->	* ASK			100.00			800	-- less than the limit price of 100.02
				* BID			99.95			100
				* BID			99.90			50		
				* BID			99.85			50

			* sell order comes in...
				* SELL, 175, MARKET
			* order book has been updated after market order...
				* BID/ASK		PRICE			SIZE
				* ASK			100.10			100
				* ASK 			100.05			500
				* ASK			100.00			800	
			-->	* BID			99.95			0	-- 100 shares at 99.95
				* BID			99.90			0	-- 50 at 99.90		
				* BID			99.85			25	-- 25 at 99.85
	
			* as times has gone on the executed prices have been decreasing -- as consequence of increased sell pressure

	* How orders get to the exchange from a person:
		1. buy order goes over internet to broker
		2. broker in turn is connected to several exchanges -- broker determines where to route your order based on information the broker knows about the exchanges 
			* NYSE			NASDAQ			BATS
			* order book		order book		order book 
			* broker has a computer located at each exchange, the broker queries the computer to look into the order book of each exchange for price information
			* broker routes your order based on exchange with best price 
		3. your order enters the exchange, gets executed
		4. the price comes back to your broker 
		5. price is forwarded back to you -- you recieve a confirmation
		* Brokerage -- internal transcactions:
			* if a brokerage has 2 clients (buy and sell) they can bypass the exchanges and make the transction internally
				* exchanges not involved
					* broker does not have to pay fees to the exchanges for the transaction
				* BY LAW -- BOTH BUYER AND SELLER MUST GET PRICES THAT ARE AT LEAST AS GOOD AS THEY WOULD HAVE GOTTEN HAD THEY GONE THROUGH AN EXCHANGE
					 -- TRANSACTION STILL MUST BE REGISTERED AT 1 OF THE EXCHANGES -- USUALLY RECORDED AT THE EXCHANGE WHERE THAT PARTICULAR STOCK IS HONED
		* Brokerage to brokerage transaction
			* requires a Dark Pool which acts as an intermediary between exchanges 
				* Dark Pool looks at the order books from the various exchanges and they are often making predications about which direction stocks are going to go
				* Dark Pools pay the brokers for privilege to look at the orders before they go to the exchanges -- and if the Dark Pools see an advantages trade they will go ahead and take it
				* route transactions -- avoid exchanges

	* How Hedge Funds exploit market mechanics:
		* distance between person and their broker and broker to an exchange results in increased time
		* hedge funds have co located computers at exchanges and so their proximity results in decreased time
		A. Order book exploit -- take advantage of proximity and resultant speed between remote buyers/sellers and exchanges
			1. Hedge fund observes order book (with decreased time) 
				* based on what it sees at the order book, it makes a predicition about price direction -- for example prices are going to go up
			2. Hedge fund buys stock
			3. you click "buy" stock -- requiring time for your order to make its way to the exchange
			4. meanwhile the price does go up
			5. your order finally is executed at the exchange -- in fact the hedge fund sells you the stock
				* Over the course of a few milliseconds, the hedge fund bought stocks, watched the price increase and sold the stocks
				* hedge fund exploits remote buyers/sellers because it can act much "earlier" than those remote buyers/sellers
		B. Geographic Arbitrage -- takes advantage of proximity and resultant speed between exchanges
			* NYSE			LONDON
			* lower price		higher price
			* HF colocated server	HF colocated server
			* buys low 		* sells high 
			

	* Additional order types:
		* exchanges
			* buy/sell
			* limit/market
		* broker:
			* buy/sell
			* limit/market
			* stop loss 
				* conditions: when stock drops to certain price, sell it 
			* stop gain
				* conditions: when stock reaches a certain price, sell it
			* trailing stop
				* automatically changing value for when a criteria is met
					* ex : 10 cents behind the price, when value goes up, trailing stop price goes up, but if price drops 10 below price a stop loss is triggered
			* selling short  -- MOST IMPORTANT AND IMPACTFUL type of order
				* take a negative position on a stock; i.e., sell a stock short if you believe its price is going to go down 
					* selling stock we don't even own! how?? -- broker facilitation!
		* mechanics of short selling: ENTRY
			* IMB selling at $100
			* you: take a short position on IBM -- want to sell IBM short (don't own any shares)
			* Joe: holds 100 shares IBM -- wants to keep then BUT is willing to lend you shares
			* Lisa: wants to buy IBM
			1. you borrow 100 shares from Joe
			2. you sell those 100 shares to Lisa
			3. in exchange, List gives you $100 per share ($10,000)
			4. you have made 10000 and you now owe Joe 100 IBM shares
		* mechanics of short selling: EXIT
			1. when/if price drops to your specified price, you inform broker to exit (buy to close position -- buy 100 shares) 
				* IBM drops to $90 -- your exit price
					* 90 * 1000 = 9000 -- 10000 - 9000 = 1000 in returns
					* or 100 shares at 100 each share drops to 90, a decrease of 10 -- so 10 * 100 = 1000
			2. you buy a 100 shares and give them back to Joe
			3. you have $1000 and no remaining obligation
		* what can go wrong?
			* IBM prices could go up!	-- you lose money


* what is a company worth?
	* why company value matters:
		* buy below "true" value, sell above "true" value
		* true value: 
			* intrinsic value: based on the value of a company as estimated by future dividends; i.e., companies pay each year or quarter a dividend (cash payment) to share holders -- 
			if i own a share of stock, how much money will i get over the future and what's it worth over all the future going forward
			* book value: based on assets a comany owns -- what does the value of the sum of the assets say the company is worth
			* market capitalization: based on value of the stock on the market and how many shares are outstanding -- what does the market think the company is worth

			* Intrinsic Value: the value of a future dollar:
				* worth less than a dollar right now -- you can spend it now
				* present value = future value / (1 + interest rate)^i	-- i = how far into the future this payment is going to be delivered -- if delivered right now -- i = 0, if in a year i = 1
				* ex: US gov't IR = 1% -- 1 dollar in the future
					present value = $1.00 / (1 + .01)^1 = 0.99
					i.e., the value of a future dollar from the US gov't is worth .99 -- gov't can charge .99 for 1.00 in a year -- the present value of a dollar in the future (1 year) is .99
					if IR = 5%
					present value = $1.00 / (1 + .05)^1 = 0.95
					i.e., the gov't can only charge you .95 for 1.00 in a year -- the present value of a dollar in the future (1 year) is .95
				* Applied to intrinsic value (dividends):
					* Interest rate analogous to: how risky the company is -- called the discount rate when applied to intrinsic value of a company (dividend payouts)
					* discount rate:
						* higher if the company is more risky	; lower if the company is less risky
					* intrinsic value = value of all future dividends that it will pay out
						* summation:
							infinity
							    E	FV/n^i				---> 	= FV/(n-1) = FV/Discount Rate
							  i = 1
						* i = 1 year to inifinity years	
						* sum of future value / n^i	-- n = (1 + IR)
			
			* Book Value:
				* book value = total assets minus intangible assets (things difficult to put price on, brand or patent, etc.) and liabilities (loans owed, etc.) 
				* ex.
					* 4 factories - $10 mil each	-- $40 mil
					* 3 patents - $5 mil each	-- $15 mil
					* 1 loan - $10 mil each		-- $10 mil
					* book value 			=  $30 mil -- the 3 patents are assets (so 55 mil total assets) we then subtract the $15 mil from total assets and minus liabilities
			
			* Market Capitalization: let the market decide value
				* market cap = # shares outstanding * price
				* price at which you can buy the entire company

	* why information affects stock price:
		* stock price is main mechanism by which investors can essentially let their view of the stock be known - if they think company is valued less they will sell and price will go down, etc. 
		* it is based on intrinsic value, book value and market cap
		* ex. : all companies exist on same island, with multiple other islands in proximity that contain other companies
			* information that a CEO "is ill"
				* intrinsic value:
					* should affect stock price downward -- because the probability that shareholders will continue to receive dividends in future is decreasing or amount of 
					dividends will decrease
			* information that "island soil is bad"
				* intrinsic value: -- reduces the expectation of future dividends
					* sector news -- affects the first company and all companies on the island that depend in any way on the soil or actions of the soil company
			* information that the "sea level is rising"
				* intrinsic value: -- reduces the expectation of future dividends
					* market wide news -- will affect all the islands 

	* compute company value: would you buy this stock
		* note: company value and stock are not necessarily the same
		1. book value:
			* 10 airplanes at $10 mil each
			* brand name at $10 mil 
			* $20 mil loan liability
		
			* total assets = $100 mil + $10 mil = $110 mil
				* intangible assets = $10 mil + $20 mil = $30 mil
					* book value = $110 mil - $30 mil = $80 mil

		2. intrinsic value:
			* $1 mil dividends per year (5% discount rate) 
		
			* intrinsic value = $1 mil / 5% = $20,000,000

		3. market cap:
			* 1 mil outstanding shares
			* $75 per share 
			
			* market cap = 1 mil * $75 = $75,000,000

		* Should you buy this stock?
			* would you buy this whole company for $75,000,000?
				* YES!
					* THEN sell all individual assets for $80,000,000
						* net return = $5,000,000
							* this is why stocks very, very rarely go below their book value -- a predatory buyer will buy entire company and sell off its pieces
		* many stock trading strategies look for deviations between the 3 valuations (book, market cap, intrinsic val) 
			* ex: if intrinsic value drops significantly and stock price is high -- might be worthwhile to short sell the stock
			* ex: if dividends are going up and market cap is low -- might be worthwhile to buy stock
			* book value provides lowest price
				* when stock price begins to approach book value, you can pretty much assume that the price is not going to go below book value or much below due to preventing predatory buyers

* The Capital Asset Pricing Model (CAPM) - developed by researchers in 1960's
	* explains how market impacts individual stock prices and provides mathematical framework for hedge fund investing 
		
	* Portfolio: a weighted set of assets
		* weight is percent of hedge fund allocated to a given asset
			* each asset is weighted -- wi (aka w sub i) = portion of funds in asset i
			* E abs(wi) = 1.0 	(summation) -- sum of all asset weights is equal to 1 (100%) 
			  i
				* abs because some weights can be negative if they are short sells of stock

			* returns on portfolio (rp(t)) = E ((wi)(ri)(t)) 	--->	return for portfolio on given day (t) = sum of (weight for each asset in portfolio * return for that day of the asset)
							 i
				* (t) == given day

			* ex:
				* on (t) -> stockA +1%
				* on (t) -> stockB -2%
				* w1 = 75%
				* w2 = -25%	--> negative position (i.e., short sell)
				
				* return (t) = (.75 * 1) + (-.25 * -2) == .75 + .5 = 1.25%
	* market portfolio:
		* market: index that broadly covers a large set of stocks -- in US: SP500 ; in UK: FTA ; in Japan: TOPIX
			* indexes composed of many individual stocks
			* market portfolio: a combination of those stocks in a certain weighting
			* cap weighted: most of the important indexes are cap weighted
				* the individual weight of each stock in the portfolio is set according to that stock's market cap (#outstanding shares * stock price) divided by the market cap of the index
					* w(i) = market cap(i) / E market cap(j)	-> market cap(i) = market cap of an individual stock -- E market cap (j) == Summation of market cap of all stocks 
								 j
								
			* indexes == oceans	-- SP500, FTA, TOPIX, etc.
				* sectors == islands	-- Energy, Technology, Manufactoring, Finance, etc.

	* CAPM equation:
		* (ri(t)) = (Bi)((rm)(t)) + (Ai(t))    --> return for an individual stock on given day (t) = beta of indv. stock * (return on market on given day (t)) + alpha of that ind. stock on that given day
			    |-----------|   |-----|
				market	    residual		
		* Beta -- what the CAPM is asserting is that the significant portion of the return for a particular stock is due to the market; i.e., the market moving up or down strongly affects the change 
		in price on every individual stock
			* the extent to which the market affects a particular stock is encapsulated in the beta portion
				* every stock has its individual beta which specifies how much its affected -- many stocks have a beta near 1 -- means if market goes up 1% we would expect all else being equal
				that the stock would go up 1% -- if beta = 2 and market goes up 2% we expect all else being equal that the stock would go up 2%
		* Alpha -- called the residual; if you calc how much stock should have gone up or down according to beta, there will be something left over, it wont exactly match what beta predicted
			* CAPM says (an important aspect of CAPM) that the expectation for alpha is 0 -- random variable with expected value of 0
		* Beta and Alpha are obtained from daily returns -- particularly how daily returns for a particular stock relate to the daily returns of the market
			* Beta is essentially the slope of a line that runs through a scatter plot between the daily returns of a particular stock and a market
			* Alpha is the y-intercept of that line 
		* this is an after the fact calculation -- just because historically a particular stock looking back in time gave you a particular alpha you shouldn't necessarily expect that in the future
			* CAPM says you should expect this alpha to be 0, but in reality though its not always 0
			
		* CAPM vs. Active management (passive investing vs. active investing):
			* this argument did not really exist until after CAPM came out 
			* passive: buy index portfolio and hold (sit on it and let grow)
			* active: buy individual stocks -- when compared to an index there are overweight (higher weights) and underweight (lower weights) for certain stocks
			* the difference is that an active investor selects different weights for certain stocks
			* (ri(t)) = (Bi)((rm)(t)) + (Ai(t))   
			    	    |-----------|   |-----|
					market	    residual		
				* both active and passive managers agree on the market component; i.e., how the stock moves each day is most signficantly influenced by the market (rm), 
				the amount that it moves is strongly related to beta (Bi) 
				* they disagree on alpha
					* CAPM says alpha is RANDOM and the expected value is 0 (on average)
					* active investors say they can PREDICT alpha; i.e., they believe they can predict whether an individual stock will go up or down relative to the market
						* active managers say they can use info (and perhaps machine learning) to find stocks that have positive or negative alpha and use that info to select stock picks
		* CAPM for portfolios:
			* (ri(t)) = (Bi)((rm)(t)) + (Ai(t))  -- return for individual stock 
			* (ri(t)) = E weightOfIndvStocki * ((Bi)((rm)(t)) + (Ai(t)))  -- return for entire portfolio -- sum of each weight of each individual stock times its beta + alpha
				    i

			* beta for entire portfolio (Bp) = E wi * Bi
							   i 
			* revised CAPM = (rp(t)) = (Bp)(rm(t)) + (Ap(t))	-- CAPM believes alpha to be on average 0
			* revised CAPM = (rp(t)) = (Bp)(rm(t)) + E weightOfIndvStocki * (Ai(t))	-- Active managers believe that alpha can be predicted and give more info
			
		* implications of CAPM
			* upward markets -- want larger Beta of portfolio
				* because that means we will go up even more than the market if Beta is greater than 1
			* downward markets -- want smaller Beta of portfolio 
				* because that means we will go down less than the market 
			* revised CAPM = (rp(t)) = (Bp)(rm(t)) + (Ap(t))	-- CAPM believes alpha to be on average 0
				* expected value of alpha = 0
					* therefore, the only way to beat the market is to choose Beta				
						* we choose high Beta in up markets
						* we choose low Beta in down markets
					* PROBLEM: 
						* Efficient Markets Hypothesis (EMH) -- you can't predict the market so choosing a high or low beta is not an option
						* CAPM says "YOU CAN'T BEAT THE MARKET"
		* Arbitrage Pricing Theory (APT):
			* developed by Stephen Ross 1976
			* CAPM: 	 
				* revised CAPM = (rp(t)) = (Bp)(rm(t)) + (Ap(t))	-- CAPM believes alpha to be on average 0
				* we have this single Beta that represents a single stocks relationship to the market -- maybe we should have multiple Betas!
					* CAPM is really only allowing us to consider a stock in the entire ocean
						* we ought to consider the other islands		
							* i.e., a particular stock might have exposure to different aspects of the market
								* ex:
									* the stock might have some exposure to finance -- Bif * rf		
									* the stock might have some exposure to tech -- Bif*rf + Bit * rt		
									* the stock might have some exposure to manufactoring --  Bif*rf + Bit * rt + Bimfg * rmfg ... + Ai		
							* we could compute for each stock, for each sector an individual Beta
								* by breaking out the Betas into these different factors we can get a more accurate forecast of what the returns going to look like 

	* How Hedge Funds use the CAPM:
		* Typical hedge fund develops methods to find stocks they think will perform better 
			* the informational edge they're seeking is usually market relative meaning they are looking for stocks that are going to go up more than the market or go down less than the market
			* if this information is reliable they can take advantage of the CAPM to virtually guarantee positive returns
		* 2 stock scenario: long. short portfolio -- there are certain advantages to this long/short approach
			* (ri(t)) = (Bi)((rm)(t)) + (Ai(t))	--> return for an individual stock on given day (t) = beta of indv. stock * (return on market on given day (t)) + alpha of that ind. stock on 
								that given day
			* using machine learning, other methods, etc. they have obtained the following information
				* stockA: predict +1% (alpha = 1%) over market for next 10 days; looked backwards at stockA with regard to market BetaA = 1.0 	-- long sell
				* stockB: predict -1% (alpha = -1%) below market for next 10 days; looked backwards at stockB with regard to market BetaB = 2.0 	-- short sell
					* if market stays flat (i.e., returns 0%) for next 10 days, $50 long position in stockA, -$50 short position stockB
						* if predictions are perfect -- stockB should go down 1% below market, stockA should go up 1% above market
							* ra = Ba* rm + Aa -- return on stockA -- Beta of A = 1.0 * return on market (0%) = 0 + Alpha of A = 1% -- 1% * 50 = $0.50
							* rb = Bb* rm + Ab -- return on stockB -- Beta of B = 2.0 * return on market (0%) = 0 + Alpha of B = -1% -- -1% * -50 = $0.50
					* if market stays goes up 10% for next 10 days, $50 long position in stockA, -$50 short position stockB
						* if predictions are perfect -- stockB should go down 1% below market, stockA should go up 1% above market
							* ra = Ba* rm + Aa -- return on stockA -- Beta of A = 1.0 * return on market (10%) = 10 + Alpha of A = 1% -- 11% * 50 = $5.50
							* rb = Bb* rm + Ab -- return on stockB -- Beta of B = 2.0 * return on market (10%) = 20 + Alpha of B = -1% -- 19% * -50 = -$9.50
							* total $ = $5.50 + -$9.50 = -$4.00
	 						* total % = 11 * .5 (of our allocation) = 5.5 + -19 * .5 (of our allocation) = -9.5 = -4%
					* if market stays goes down 10% for next 10 days, $50 long position in stockA, -$50 short position stockB
						* if predictions are perfect -- stockB should go down 1% below market, stockA should go up 1% above market
							* ra = Ba* rm + Aa -- return on stockA -- Beta of A = 1.0 * return on market (-10%) = -10 + Alpha of A = 1% -- -9% * 50 = -$4.50
							* rb = Bb* rm + Ab -- return on stockB -- Beta of B = 2.0 * return on market (-10%) = -20 + Alpha of B = -1% -- -21% * -50 = $10.50
							* total $ = -$4.50 + $10.50 = $6.00
	 						* total % = -9 * .5 (of our allocation) = 4.5 + -21 * .5 (of our allocation) = -10.5 = 6%
			* even if we have perfect predicted alpha and perfect predicted beta -- we can still lose!
				* how do we fix this?? -- CAPM!
	
		* 2 stock scenario using CAPM math
			* rp = E wi * (Bi * rm + Ai)
			       i
			* rp = (Wa*Ba + wb * Bb) * rm + wa*Aa + wb * Ab
				* wa = .5 ; wb = -.5 ; Aa = 1% ; Ab = -1% ; Ba = 1.0 ; Bb = 2.0
				
				* rp = (.5*1.0 + -.5*2.0) * rm ...	-- THIS IS BETA FOR THE PORTFOLIO (SEE BEGINNING OF THIS SECTION) 
					* rp = -.5 * rm + .5 * 1.0 + -.5 * -1
						* rp = -.5 * rm + 1%
							* so if rm = 10%	-- -.5*10%+1% = -4% return on portfolio
				* ALPHA is derived from some information that allowed us to predict	-- have control
				* return on market (rm) cannot not be derived from information 		-- have no control
					* is there some way we can remove all else but alpha?
						* i.e., can we make Beta for portfolio = 0?
							* i.e., can we find weights for stockA and stockB so that their sum = 0	(stockA allocations and stockB allocations and Beta's that equal 0)
								* i.e., can we remove/minimize market risk
				* ex: find allocations/weights that remove/minimize market risk (i.e., make Beta * rm = 0)
					* wa = .5 ; wb = -.5 ; Aa = 1% ; Ab = -1% ; Ba = 1.0 ; Bb = 2.0
						* we know that stockA is being long'd (+ allocation) and stockB is being short'd (- allocation)
							* Bp = wa * 1 + wb * 2 = 0 -> in order to equal 0, wa is the complement of wb
							* wa = -2 * wb
						* we also know that the sum of the absolute values of stockA and stockB should be equal to 1
							* abs(wa) + abs(wb) = 1
								* abs(-2wb) + abs(wb) = 1
									* 3abs(wb) = 1
										* abs(wb) = 1/3
											* wb = -1/3	-- we know weight/allocation of stockB must be negative (short sell) 
											* wa = -2 * -1/3 = 2/3
					* wa = .66 ; wb = -.33 
				* ex: 
					* wa = .66 ; wb = -.33 ; rm = 10% 
						* rp = wa * Ba * rm + wa * Aa + wb * Bb * rm + wb * Ab
							* rp = (.66 * 1.0 * rm + -.33 * 2.0 * rm) 
								* rp =  0 + .66 * 1.0 + -.33 * -1.0 
									* rp = .66 + .33 = 1% which ever way the market goes
					* NOTE: the Betas are not guaranteed to continue into the future neither are the Alphas -- just computed based on the info we obtained
						* not guaranteed but is a way to use long/short investing to reduce exposure to the market overall and to focus on the Alpha components we
						can control via information
		* summary
			* assuming we have some sort of actionable information -> forecast alpha of individual stock 
			* CAPM enables:
				* minimized market risk where the Beta of the portfolio = 0
					* via finding weight/allocation of individual stocks
			* CAPM can be a really valuable tool in terms of portfolio construction because it can enable you to build portfolios that are less exposed to market risk
				* long/short trading refined by CAPM


* Technical Analysis vs. Fundamental Analysis	-- 2 broad categories of approaches to use for choosing stocks to buy or sell
	* fundamental analysis:
		* involves looking at aspects of a company in order to estimate its value 
		* typically look for situations where the price of a company is below its value
	* technical analysis:
		* don't care about value of a company
		* focus on patterns or trends in a stock's price

	* characteristics of technical analysis:
		* what is it?
			* ONLY looks at price and volume	-- as opposed to fundamental analysis which looks at fundamental factors such as earnings, dividends, cash flow, book value, etc.
			* compute statistics called indicators by looking back in time at historical price and volume
			* indicators are heuristics that may hint at a buy or sell opportunity	-- represents someone's interpretation or hunch of how a statistical approach to previous prices and volumes
			might suggest future price movement
		* criticisms:
			* not an appropriate method for investing because it is not taking into account the value of a company 
				* solution: instead think about technical analysis as a TRADING approach rather than an investing approach!
		* why it might work?
			* there is information in the price and price change -- reflects sentiments of buyers and sellers especially if we see a price for a particular stock is moving in a different
			direction than the overall market
			* heuristics work!
	* example: fundamental or technical?
		* moving average of price	-- technical
		* % change in volume		-- technical
		* price/earnings ratio		-- fundamental	-- using price AND earnings
		* intrinsic value		-- fundamental
	* when is technical analyisis effective?
		* rules of thumb:
			* individual (by themselves) indicators are weakly predictive
				* the more people that use a particular approach the less value that is realized by any 1 individual by themselves
			* combinations of multiple indicators are stronger predictors (provide value) 
			* look for contrasts (stock vs market)	
				* look for 1 stock that has a strongly different indicator than another stock
				* look for 1 stock that is behaving differently than the market as a whole 
			* technical analysis works better over shorter time periods
	* when does technical analysis have value?
		* trading horizon: time period between buying and selling a particular stock
			ms		--->		days		--->			years
			
		* fundamental: how much do fundamental factors contribute to the change in price over time
			* in short term -- very little value
			* long term 	-- lots of value
		* technical: how much do technincal factors contribute to the change in price over time
			* short term	-- very valuable
			* long term	-- not so valuable
		* consider...
			* decision speed:
				* how fast do the decisions need to be made if...
					* you are going to be trading at the ms level		-- very fast
					* you are going to be trading at the years level 	-- not so fast
			* decision complexity:
				* how complex is the decision to buy or sell a stock if...
					* you are going to hold the stock for years?		-- very complex
					* you are going to hold the stock for ms?		-- not very complex
			* computers excel or are in the beginning of the trading horizon	-- fast decisions and non complex decisions
				* this also happens to be where technical analysis has value 	-- within this domain of the computer
			* humans excel at the end of the trading horizon			-- slow decisions and complex decisisons
	
	* A few good technical indicators: some of the most common and most popular
		* momentum: price[t] / price[t-n] - 1	n = days of momentum
			* over a given number of days, how much has the price changed
			* positive or negative depending on overall change
			* strength = steepness of the momentum line/slope
		* simple moving average (SMA): (price[t] / price[t-n:t].mean()) - 1
			* indexed by n-days (how many days we are looking back: n-day window)
			* smoothed value of price chart
			* lags movement
			* at least 2 different ways technicians use SMA as parts of trading strategies
				1. look for places where current price crosses through the SMA -- important events especially if the average is over many n-days			
					* if you combine this momentum: i.e., price has strong momentum and is crossing the SMA
						* that can be a signal
				2. as a proxy for underlying value: i.e., if you look back over certain period of time and take that average price, that might represent the true value of the company
					* if we see a large excursion from that price, we should expect that that price is going to come back down or up to that average
						* signals an arbitrage opportunity -- buy or sell
		* Bollinger Bands: bb[t] = price[t] - SMA[t] / 2 * std[t]
			* for low volatility stocks (stocks that are currently experiencing low volatility):
				* should use a smaller % (number) of price excursion from SMA before it triggers a signal
			* for high volatility stocks (stocks that are currently experiencing high volatility):
				* should use a larger % (number) of price excursion from SMA before it triggers a signal
			* this is accomplished by using standard deviation	-- 2 standard deviations of prices (within n-day window) from SMA (of that n-day window)
			* how to use:
				* look for points where price crosses the Bollinger Bands from outside to inside
					* this indicates a large excursion from SMA and we are expecting that it will retreat back to the SMA
						* demonstrate a retreat because it has gone from outside the band back towards the SMA
		
		* Normalization:
			* SMA		--	-.5 to +.5	
			* momentum	--	-.5 to +.5
			* BB		--	-1.0 to +1.0
			* if we were to plug these values into some sort of machine learner we would have a problem
				* BB factor would tend to overwhelm these other factors and become the most important factor
			* SOLUTION	-- normalization
				* normalization: 
					* takes each of these factors and stretches or compresses so that the value ranges vary from -1 to +1
				* normed vals = values - mean / values.mean()

* Dealing with data:
	* How data is aggregated:
		* i.e., many many trades happening on different exchanges -- how is that data combined and how is reported so that it can be used
		* tick 
			* the finest resolution of data is called a TICK
			* represents a successful buy/sell match or a successful transaction		
				* each transaction happens at no specific time -- happens only when buy and sell are matched -- no guarantee that there's going to be a trade at any particular point in time
					* trades happen when they happen
		* each exchange provides its own data feed regarding these transactions 
			* so you can subscribe to these feeds and see at each tick when a transaction happens on any particular exchange 
			* for highly liquid stocks there may be hundreds, thousands, hundreds of thousands of these transactions every second	-- so collecting and using all these ticks for all these
			exchanges over a long period of time results in a lots of data -- becomes very complex
			* tick data is usually consalidated into minute by minute or hour by hour chunks 
				* data collected within each chunk and represent it as:
					* open: first transaction within the time period (chunk)
					* high: highest price within entire time period (chunk)
					* low: lowest price within entire time period (chunk)
					* close: last transaction within the time period (chunk)
					* volume: total volume within the time period (chunk)

		* price anomaly:
			* dramatic price drops and rises over time period chunk
			* why?
				* stock splits:
					* an issue of new shares in a company to existing shareholders in proportion to their current holdings
						* ex: take 1 share at $300 and split into 4 shares at $75 -- 4:1 split
					* why do stocks split?
						* price is too high
						* why is high price a problem?
							* options are usually traded in blocks of 100 shares -- this makes stocks expensive and less liquid
							* even buying 1 share of an expensive stock is a problem
							* if you are building a portfolio and want to have a finely tuned proportion of each stock, if some of the stock prices are very high
							it becomes difficult to get a fine resolution  
					* problems:
						* when analyzing data and look for trading signals/opportunities
							* at stock splits the algorithm might mistake them for short sell opportunities instead of understanding the stock split occurance
					* solution:
						* if you want to trade using this actual close data - must account for the stock splits and that can be cumbersome
							* adjusted close aka adjusted prices!
								* create a timeline of prices that are adjusted to account for these changes such that you can look back over adjusted close,
								simulate buying at a particular time and seeing how the value increases over time accurately without having to account for stock splits
						* how it works		 			
							* the very last day, adjusted close and actual close are always the same
							* track back in time until a stock split 
								* go back over all historical data and divide by the split ratio
							* track back in time until a stock split
								* go back over all historical data and divide by the split ratio
							* ... 
		* dividends	
			* can have significant effect on what happens to the actual price of a stock
				* if stock is trading at $100 and they announce "on this datein the future we are going to pay a $1 dividend"
					* what will happen to the price of this stock between now and date of the dividend?
						* i.e., what will price be day before dividend and what will price be the day the dividend is paid?
							* price day before = rise to $101	-- get 1 share of stock and a dollar the next day
							* price day of dividend = drop to $100	-- everyone that held a share this day got 1 share of stock and 1 dollar
			* adjusting for dividends
				* just before dividend is paid, we adjust all the prices down by the proportion of the dividend
		* adjusted close
			* always same as closing price
			* adjusted for both dividends and splits
			* changes based on date on which data was accumulated
				* adjusted close prices usually lower with newer data to account for stock splits and dividend payouts that occur in the future since the old data was collected
		* survivor bias
			* logical error of concentrating on the people or things that "survived" some process and inadvertently overlooking those that did not because of their lack of visibility
			* this in the context of stocks existing in a particular market "as of today" and not accounting for stocks that existed within the a given time window but no longer exist
			in the current market

* Efficient Markets Hypothesis:
	* ASSUMPTIONS: we have been operating under implicit assumptions
		* technical analysis assumption: there is information in historical price and volume data that we can discover and exploit in advance of the market
		* fundamental analysis assumption: there is information in fundamental data (like earnings) that can be exploited and traded upon in advance of the market
		* The Efficient Markets Hypothesis says both assumptions are wrong!
	* EMH assumptions:
		* large number of investors interacting in the market for profit
			* most important assumption
			* have an incentive to find opportunities where the price of a stock is out of line with what its true value is
			* because there are so many of these investors operating simultaneously anytime a little bit of information comes out there, the price is going to move
		* new information arrives randomly
			* arrives at random times, rates for different stocks, but its constantly arriving and investors are paying attention to that information
			* therefore... (see next assumption)
		* prices adjust quickly
		* current price reflect all available information
			* i.e., all this information that is trickling in is acted upon by the large number of investors, the price adjusts quickly to that information and the current price reflects 
			all information about that stock
	* origins of information
		* where does the information come from? (from most public to least public)	-- below is not an exhaustive list
			* price/volume
				* public, rampany, quick
				* basis of technical analysis
			* fundamental
				* reported quarterly
				* public -- points more to root of the value of the company than the just the price/volume
			* exogenous
				* information about the world that affects the company
				* ex: price of oil affects airline stock
			* company insiders
				* important and secretive
				* ex. CEO knows that a drug you have invented is about to be improved	-- you buy more stock may or may not be legal
					* reflects information you have that people outside the company do not have
				* least accessible
			* each of these types of information has a relationship to the EMH
	* 3 forms/versions of EHM (from weak to strong)
		* weak: future prices cannot be predicted by analyzing historical prices 	-- prohibits profiting from technical analysis
			* the current price reflects all information we might know, so just by looking at these historical prices you can't predict what is going to happen next
			* notice how this does leave room potentially for fundamental analysis -- silent on fundamental info, insider, etc. because it just pertains to price (a tech indicator) 
		* semi-strong: prices adjust rapidly/immediately to new public information	-- prohibits profiting from technical or fundamental analysis
			* when companies have quarterly reports that contain fundamental information, prices react immediately to that information
			* public information such as quartely reports cause price to adjust quickly
			* if semi strong is correct that would seem to prohibit fundamental analysis
		* strong: prices reflect all information public and private 			-- prohibits profiting from technical analysis, fundamental analysis or insider info
			* even if there's some secret information within the company that points to a higher price later, the price will go up in the face of that knowledge
			* so if the strong version of EMH is true, it is essentially impossible to make money by holding a portfolio other than the market portfolio
				* i.e., even insider information can't be leveraged to profit in the market 
	* is EMH correct??
		* if it is, then we can't beat the market using any of the previous strategies
		* strong version of EMH is the least solid 
			* because we have seen people make money for insider info -- even served jail time
		* price/earnings ratio corresponding with higher returns -- shows price/earnings ratio are very predictive across many decades of future returns
			* this refutes the semi strong EMH

* Fundamental Law of active portfolio management
	* "why diversification is only necessary when investors do not know what they are doing"	- Warren Buffet	discussing investor skill and breadth (number of investments)
		* this lesson is about how investment performance relates to those 2 factors



































